# FAERS MCP Server

MCP server for FDA Adverse Event Reporting System (FAERS) data via the OpenFDA API.

**Generated by:** [@sineai/mcp-forge](https://dev.azure.com/sineai/Agents/_git/mcp-forge) v2.0.0

## Features

- Search adverse event reports by drug, reaction, date range
- Get aggregated event counts grouped by reaction, outcome, demographics
- Compare safety profiles across multiple drugs
- Analyze serious events (deaths, hospitalizations, etc.)
- View reporting trends over time
- Find drugs associated with specific reactions
- Identify commonly co-reported drugs
- **Get FDA drug label information** (warnings, contraindications, boxed warnings)
- **Search FDA drug recalls** and enforcement actions
- **Search by indication** to compare drugs in the same therapeutic class

## Authentication

This MCP is configured for **Standalone Mode** - it handles its own authentication.

### Key Vault Secrets

| Secret Name | Description |
|-------------|-------------|
| \`auth-mode\` | \`azure_ad\`, \`api_key\`, or \`none\` |
| \`azure-tenant-id\` | Azure AD tenant ID |
| \`azure-client-id\` | App registration client ID |
| \`azure-allowed-groups\` | Comma-separated group IDs |
| \`api-keys\` | Comma-separated API keys |

### OpenFDA API Key (Optional)

The OpenFDA API works without an API key, but with limits:
- **Without key (free mode):** 240 requests/min, 1,000 requests/day per IP
- **With key:** 240 requests/min, 120,000 requests/day per key

**To get a free API key:**
1. Go to https://open.fda.gov/apis/authentication/
2. Enter your email address
3. Check your email for the API key
4. Add to your MCP config as \`OPENFDA_API_KEY\` environment variable

If no API key is provided, the MCP will run in free mode automatically.

## Project Structure

\`\`\`
src/
├── tools/          Your tools - EDIT THIS!
│   ├── definitions.ts Tool schemas
│   ├── handlers.ts    Tool implementations
│   └── index.ts       Tool exports
│
└── index.ts        Entry point
\`\`\`

Core functionality (security, auth, server) comes from the \`@sineai/mcp-core\` package.

## Quick Start

\`\`\`bash
# Install dependencies
npm install

# Copy and configure environment
cp .env.example .env

# Run locally (stdio mode)
npm run dev

# Run in remote mode (HTTP/SSE)
npm run start:remote
\`\`\`

## Available Tools

### Adverse Event Tools
| Tool | Description |
|------|-------------|
| \`search_adverse_events\` | Search AE reports by drug, reaction, date |
| \`get_event_counts\` | Aggregated counts by reaction, outcome, demographics |
| \`compare_safety_profiles\` | Compare AE profiles across 2-5 drugs |
| \`get_serious_events\` | Filter to serious outcomes only |
| \`get_reporting_trends\` | AE volume over time by year/quarter/month |
| \`search_by_reaction\` | Find drugs associated with a reaction |
| \`get_concomitant_drugs\` | Find commonly co-reported drugs |
| \`search_by_indication\` | Find AEs for drugs used for a specific condition |

### Drug Information Tools
| Tool | Description |
|------|-------------|
| \`get_drug_label_info\` | FDA drug label (warnings, contraindications, boxed warnings) |
| \`get_recall_info\` | FDA drug recalls and enforcement actions |
| \`get_data_info\` | Database info and limitations |

## Example Queries

Once connected, you can ask:

- "What are the most common adverse events reported for Humira?"
- "Compare the safety profiles of Humira, Enbrel, and Remicade"
- "Show me serious adverse events for metformin in 2023"
- "What drugs are most commonly associated with Stevens-Johnson syndrome?"
- "What's the trend in adverse event reports for Ozempic over the past 3 years?"
- "Get the boxed warnings and contraindications for Xarelto"
- "Has Zantac been recalled? What were the reasons?"
- "What adverse events are reported for diabetes medications?"

## Data Limitations

**IMPORTANT:** FAERS data has significant limitations:

- A report does **NOT** prove the drug caused the event
- Voluntary reporting means many events go unreported
- Cannot calculate incidence rates (no denominator)
- Reporting influenced by publicity and time on market
- Duplicate and incomplete reports exist

This data should be used for signal detection and hypothesis generation, not as the sole basis for clinical decisions.

## Configuration

### MCP Config (Cursor/Claude Desktop)

\`\`\`json
{
  "mcpServers": {
    "faers": {
      "command": "node",
      "args": ["/path/to/drug-safety-mcp/dist/index.js"],
      "env": {
        "OPENFDA_API_KEY": "your_api_key_here"
      }
    }
  }
}
\`\`\`

Or for remote mode:

\`\`\`json
{
  "mcpServers": {
    "faers": {
      "url": "https://<your-mcp-url>/mcp",
      "headers": {
        "Authorization": "Bearer <your-token>"
      }
    }
  }
}
\`\`\`

### .env (for local development)

\`\`\`env
# Only this is required for deployment!
AZURE_KEYVAULT_NAME=your-keyvault

# Optional (for local development)
MCP_MODE=local
PORT=3000
LOG_LEVEL=info

# Optional: OpenFDA API key for higher rate limits
# If not provided, uses free tier (1,000 requests/day)
OPENFDA_API_KEY=your_api_key_here
\`\`\`

## Deployment

Deploy to Azure Container Apps:

\`\`\`bash
npm run deploy
\`\`\`

This will:
- Build TypeScript
- Build Docker image
- Push to Azure Container Registry
- Create/update Container App
- Grant Key Vault access

## Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| \`MCP_MODE\` | \`local\` | \`local\` (stdio) or \`remote\` (HTTP) |
| \`PORT\` | \`3000\` | HTTP port (remote mode) |
| \`AZURE_KEYVAULT_URL\` | - | Key Vault URL |
| \`LOG_LEVEL\` | \`info\` | \`debug\`, \`info\`, \`warn\`, \`error\` |
| \`OPENFDA_API_KEY\` | - | OpenFDA API key (optional, free mode if not set) |

## License

MIT

## Author

Signant Health
